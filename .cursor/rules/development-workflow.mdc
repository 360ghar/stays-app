---
alwaysApply: false
description: Development commands, build scripts, and workflow guidelines
---

# Development Workflow & Commands

## Dependency Management
```bash
# Install dependencies
flutter pub get

# Update dependencies
flutter pub upgrade
```

## Code Quality & Analysis
```bash
# Static analysis
flutter analyze

# Format code
dart format .

# Combined quality check
flutter analyze && dart format . --set-exit-if-changed
```

## Code Generation
```bash
# Generate code (models, routes, etc.)
dart run build_runner build --delete-conflicting-outputs

# Watch mode for continuous generation
dart run build_runner watch --delete-conflicting-outputs
```

## Environment-Specific Entry Points
The app uses different entry points for each environment:

```bash
# Development environment (loads .env.dev)
flutter run -t lib/main_dev.dart

# Staging environment (loads .env.staging)
flutter run -t lib/main_staging.dart

# Production environment (loads .env.prod)
flutter run -t lib/main_prod.dart

# With flavor (alternative syntax)
flutter run --flavor dev -t lib/main_dev.dart
flutter run --flavor staging -t lib/main_staging.dart
flutter run --flavor prod -t lib/main_prod.dart

# Run with specific device
flutter run -d <device_id> -t lib/main_dev.dart
```

## Environment Configuration
Each environment loads specific configuration:

- **Development**: `lib/main_dev.dart` → `.env.dev`
- **Staging**: `lib/main_staging.dart` → `.env.staging`
- **Production**: `lib/main_prod.dart` → `.env.prod`

## Testing (Actual Structure)
```bash
# Run all tests
flutter test

# Run with coverage (generates lcov.info in coverage/)
flutter test --coverage

# Run specific test file
flutter test test/unit/controllers/auth_controller_test.dart

# Run widget tests
flutter test test/widget/

# Run integration tests
flutter test integration_test/

# Run tests with specific reporter
flutter test --machine
```

## Build Commands (Actual Implementation)
```bash
# Development builds
flutter build apk -t lib/main_dev.dart
flutter build ios -t lib/main_dev.dart

# Staging builds
flutter build apk -t lib/main_staging.dart
flutter build ios -t lib/main_staging.dart

# Production builds
flutter build apk -t lib/main_prod.dart
flutter build ios -t lib/main_prod.dart

# App Bundle for Play Store (production only)
flutter build appbundle -t lib/main_prod.dart

# Web builds (if needed)
flutter build web -t lib/main_prod.dart
```

## Environment Setup
```bash
# Install dependencies
flutter pub get

# Generate code (models, localization)
dart run build_runner build --delete-conflicting-outputs

# Clean and regenerate
flutter clean && flutter pub get
dart run build_runner build --delete-conflicting-outputs

# Check environment variables are loaded
# Each .env.* file should contain:
# API_BASE_URL=your-api-url
# SUPABASE_URL=your-supabase-url
# SUPABASE_ANON_KEY=your-anon-key
# ENABLE_ANALYTICS=true/false
# GOOGLE_MAPS_API_KEY=your-maps-key (optional)
```

## Debug Commands
```bash
# Clean build and reinstall
flutter clean && flutter pub get
flutter run -t lib/main_dev.dart

# Clear app data and reinstall
flutter clean && flutter pub get && flutter run -t lib/main_dev.dart

# Check connected devices
flutter devices

# Doctor check (verify Flutter installation)
flutter doctor

# Check pub dependencies for outdated packages
flutter pub outdated

# Upgrade dependencies
flutter pub upgrade

# Analyze code for issues
flutter analyze

# Format code
dart format .

# Combined quality check
flutter analyze && dart format . --set-exit-if-changed && flutter test
```

## Environment Setup
- Use `.env.dev`, `.env.staging`, `.env.prod` for environment variables
- Never commit `.env.*` files to version control
- Use `flutter_dotenv` package for loading environment variables
- Environment selection is handled by entry point files and `--flavor` flags